/*! superpixelboy 2017-07-06 */
!function(a,b,c){function d(c,f){if(!b[c]){if(!a[c]){var g="function"==typeof require&&require;if(!f&&g)return g(c,!0);if(e)return e(c,!0);throw new Error("Cannot find module '"+c+"'")}var h=b[c]={exports:{}};a[c][0].call(h.exports,function(b){var e=a[c][1][b];return d(e?e:b)},h,h.exports)}return b[c].exports}for(var e="function"==typeof require&&require,f=0;f<c.length;f++)d(c[f]);return d}({1:[function(a,b,c){b.exports={things:[{position:{X:0,Y:16},type:"lava"},{position:{X:8,Y:8},type:"house"},{position:{X:26,Y:14},type:"block"},{position:{X:8,Y:24},type:"ground"},{position:{X:16,Y:24},type:"ground"},{position:{X:24,Y:24},type:"ground"},{position:{X:32,Y:24},type:"ground"},{position:{X:40,Y:24},type:"ground"},{position:{X:56,Y:24},type:"ground"},{position:{X:64,Y:24},type:"ground"},{position:{X:72,Y:24},type:"ground"},{position:{X:80,Y:24},type:"ground"},{position:{X:88,Y:24},type:"ground"},{position:{X:96,Y:24},type:"ground"},{position:{X:104,Y:24},type:"ground"},{position:{X:112,Y:24},type:"ground"},{position:{X:120,Y:24},type:"ground"},{position:{X:128,Y:24},type:"ground"},{position:{X:136,Y:24},type:"ground"},{position:{X:144,Y:24},type:"ground"},{position:{X:152,Y:24},type:"ground"},{position:{X:160,Y:24},type:"ground"},{position:{X:168,Y:24},type:"ground"},{position:{X:176,Y:24},type:"ground"},{position:{X:184,Y:24},type:"ground"},{position:{X:192,Y:24},type:"ground"},{position:{X:200,Y:24},type:"ground"},{position:{X:208,Y:24},type:"ground"},{position:{X:224,Y:24},type:"ground"},{position:{X:232,Y:24},type:"ground"},{position:{X:240,Y:24},type:"ground"},{position:{X:248,Y:24},type:"ground"},{position:{X:256,Y:24},type:"ground"},{position:{X:264,Y:24},type:"ground"},{position:{X:272,Y:24},type:"ground"},{position:{X:280,Y:24},type:"ground"},{position:{X:288,Y:24},type:"ground"},{position:{X:296,Y:24},type:"ground"},{position:{X:304,Y:24},type:"ground"},{position:{X:312,Y:24},type:"ground"},{position:{X:30,Y:14},type:"block"},{position:{X:34,Y:14},type:"block"},{position:{X:48,Y:16},type:"lava"},{position:{X:69,Y:16},type:"wall"},{position:{X:79,Y:10},type:"block"},{position:{X:83,Y:10},type:"block"},{position:{X:87,Y:10},type:"block"},{position:{X:94,Y:13},type:"block"},{position:{X:96,Y:13},type:"block"},{position:{X:98,Y:13},type:"block"},{position:{X:100,Y:13},type:"block"},{position:{X:92,Y:15},type:"block"},{position:{X:102,Y:15},type:"block"},{position:{X:112,Y:19},type:"block"},{position:{X:134,Y:19},type:"block"},{position:{X:121,Y:20},type:"enemy"},{position:{X:61,Y:20},type:"enemy"},{position:{X:141,Y:8},type:"house"},{position:{X:160,Y:16},type:"wall"},{position:{X:182,Y:16},type:"wall"},{position:{X:173,Y:20},type:"enemy"},{position:{X:171,Y:20},type:"enemy"},{position:{X:216,Y:16},type:"lava"},{position:{X:214,Y:19},type:"block"},{position:{X:214,Y:17},type:"block"},{position:{X:214,Y:15},type:"block"},{position:{X:212,Y:17},type:"block"},{position:{X:210,Y:19},type:"block"},{position:{X:212,Y:19},type:"block"},{position:{X:224,Y:19},type:"block"},{position:{X:224,Y:17},type:"block"},{position:{X:224,Y:15},type:"block"},{position:{X:226,Y:17},type:"block"},{position:{X:226,Y:19},type:"block"},{position:{X:228,Y:19},type:"block"},{position:{X:204,Y:20},type:"enemy"},{position:{X:200,Y:20},type:"enemy"},{position:{X:12,Y:12},type:"coin"},{position:{X:15,Y:12},type:"coin"},{position:{X:18,Y:12},type:"coin"},{position:{X:317,Y:19},type:"block"},{position:{X:317,Y:17},type:"block"},{position:{X:317,Y:15},type:"block"},{position:{X:317,Y:13},type:"block"},{position:{X:317,Y:11},type:"block"},{position:{X:317,Y:9},type:"block"},{position:{X:317,Y:7},type:"block"},{position:{X:317,Y:5},type:"block"},{position:{X:317,Y:3},type:"block"},{position:{X:317,Y:1},type:"block"},{position:{X:287,Y:19},type:"block"},{position:{X:217,Y:13},type:"coin"},{position:{X:220,Y:13},type:"coin"},{position:{X:83,Y:8},type:"coin"},{position:{X:171,Y:12},type:"coin"},{position:{X:177,Y:12},type:"coin"},{position:{X:241,Y:16},type:"wall"},{position:{X:256,Y:16},type:"wall"},{position:{X:256,Y:10},type:"wall"},{position:{X:249,Y:21},type:"coin"},{position:{X:252,Y:21},type:"coin"},{position:{X:251,Y:11},type:"block"},{position:{X:263,Y:14},type:"block"},{position:{X:265,Y:14},type:"block"},{position:{X:267,Y:14},type:"block"},{position:{X:269,Y:14},type:"block"},{position:{X:271,Y:14},type:"block"},{position:{X:268,Y:13},type:"enemy"},{position:{X:278,Y:20},type:"enemy"},{position:{X:264,Y:21},type:"coin"},{position:{X:267,Y:21},type:"coin"},{position:{X:299,Y:16},type:"door"}]}},{}],2:[function(a,b,c){b.exports={things:[{type:"ground",position:{X:8,Y:24}},{type:"ground",position:{X:16,Y:24}},{type:"ground",position:{X:72,Y:24}},{type:"ground",position:{X:80,Y:24}},{type:"ground",position:{X:88,Y:24}},{type:"ground",position:{X:96,Y:24}},{type:"ground",position:{X:104,Y:24}},{type:"ground",position:{X:112,Y:24}},{type:"ground",position:{X:120,Y:24}},{type:"ground",position:{X:128,Y:24}},{type:"ground",position:{X:136,Y:24}},{type:"ground",position:{X:144,Y:24}},{type:"ground",position:{X:152,Y:24}},{type:"ground",position:{X:160,Y:24}},{type:"ground",position:{X:168,Y:24}},{type:"ground",position:{X:176,Y:24}},{type:"ground",position:{X:184,Y:24}},{type:"ground",position:{X:192,Y:24}},{type:"ground",position:{X:200,Y:24}},{type:"ground",position:{X:208,Y:24}},{type:"ground",position:{X:224,Y:24}},{type:"ground",position:{X:248,Y:24}},{type:"ground",position:{X:256,Y:24}},{type:"ground",position:{X:264,Y:24}},{type:"ground",position:{X:272,Y:24}},{type:"ground",position:{X:280,Y:24}},{type:"ground",position:{X:288,Y:24}},{type:"ground",position:{X:296,Y:24}},{type:"ground",position:{X:304,Y:24}},{type:"ground",position:{X:312,Y:24}},{type:"lava",position:{X:48,Y:16}},{type:"block",position:{X:100,Y:13}},{type:"block",position:{X:92,Y:15}},{type:"block",position:{X:102,Y:15}},{type:"enemy",position:{X:100,Y:20}},{type:"wall",position:{X:160,Y:16}},{type:"lava",position:{X:216,Y:16}},{type:"block",position:{X:214,Y:19}},{type:"block",position:{X:214,Y:17}},{type:"block",position:{X:214,Y:15}},{type:"block",position:{X:212,Y:17}},{type:"block",position:{X:210,Y:19}},{type:"block",position:{X:212,Y:19}},{type:"block",position:{X:224,Y:19}},{type:"block",position:{X:224,Y:17}},{type:"block",position:{X:224,Y:15}},{type:"block",position:{X:226,Y:17}},{type:"block",position:{X:226,Y:19}},{type:"block",position:{X:228,Y:19}},{type:"enemy",position:{X:201,Y:20}},{type:"enemy",position:{X:197,Y:20}},{type:"block",position:{X:317,Y:19}},{type:"block",position:{X:317,Y:17}},{type:"block",position:{X:317,Y:15}},{type:"block",position:{X:317,Y:13}},{type:"block",position:{X:317,Y:11}},{type:"block",position:{X:317,Y:9}},{type:"block",position:{X:317,Y:7}},{type:"block",position:{X:317,Y:5}},{type:"block",position:{X:317,Y:3}},{type:"block",position:{X:317,Y:1}},{type:"block",position:{X:287,Y:19}},{type:"coin",position:{X:217,Y:13}},{type:"coin",position:{X:220,Y:13}},{type:"wall",position:{X:256,Y:16}},{type:"wall",position:{X:256,Y:10}},{type:"coin",position:{X:249,Y:21}},{type:"coin",position:{X:252,Y:21}},{type:"block",position:{X:251,Y:11}},{type:"enemy",position:{X:281,Y:20}},{type:"door",position:{X:299,Y:16}},{type:"ground",position:{X:0,Y:24}},{type:"ground",position:{X:24,Y:24}},{type:"lava",position:{X:40,Y:16}},{type:"lava",position:{X:32,Y:16}},{type:"block",position:{X:56,Y:19}},{type:"block",position:{X:56,Y:15}},{type:"block",position:{X:58,Y:15}},{type:"block",position:{X:58,Y:19}},{type:"block",position:{X:60,Y:19}},{type:"block",position:{X:62,Y:19}},{type:"platform",position:{X:48,Y:24}},{type:"lava",position:{X:64,Y:16}},{type:"lava",position:{X:56,Y:16}},{type:"coin",position:{X:42,Y:18}},{type:"coin",position:{X:46,Y:16}},{type:"coin",position:{X:50,Y:18}},{type:"house",position:{X:73,Y:8}},{type:"coin",position:{X:77,Y:12}},{type:"coin",position:{X:80,Y:12}},{type:"coin",position:{X:83,Y:12}},{type:"wall",position:{X:93,Y:16}},{type:"platform",position:{X:141,Y:18}},{type:"enemy",position:{X:130,Y:20}},{type:"enemy",position:{X:111,Y:20}},{type:"enemy",position:{X:108,Y:20}},{type:"enemy",position:{X:104,Y:20}},{type:"wall",position:{X:160,Y:10}},{type:"wall",position:{X:208,Y:10}},{type:"block",position:{X:210,Y:17}},{type:"block",position:{X:212,Y:15}},{type:"block",position:{X:210,Y:15}},{type:"block",position:{X:208,Y:15}},{type:"block",position:{X:208,Y:17}},{type:"block",position:{X:208,Y:19}},{type:"block",position:{X:206,Y:19}},{type:"block",position:{X:206,Y:17}},{type:"block",position:{X:204,Y:19}},{type:"platform",position:{X:169,Y:12}},{type:"coin",position:{X:168,Y:17}},{type:"coin",position:{X:171,Y:17}},{type:"coin",position:{X:174,Y:17}},{type:"coin",position:{X:202,Y:18}},{type:"coin",position:{X:205,Y:16}},{type:"coin",position:{X:199,Y:18}},{type:"lava",position:{X:232,Y:16}},{type:"lava",position:{X:240,Y:16}},{type:"block",position:{X:234,Y:15}},{type:"block",position:{X:236,Y:15}},{type:"block",position:{X:238,Y:15}},{type:"block",position:{X:240,Y:15}},{type:"block",position:{X:249,Y:11}},{type:"block",position:{X:247,Y:11}},{type:"block",position:{X:265,Y:11}},{type:"block",position:{X:269,Y:13}},{type:"block",position:{X:273,Y:15}}]}},{}],3:[function(a,b,c){"use strict";var d=a("jsgtb"),e=d.game,f=d.keys,g=a("./character"),h=a("./world"),i=a("./logo"),j=a("./1-1.json"),k=[{name:"1-1",data:a("./1-1.json")},{name:"1-2",data:a("./1-2.json")}],l=new e.Resources;d.canvas.size(320,320),d.canvas.context.imageSmoothingEnabled=!1,d.canvas.context.mozImageSmoothingEnabled=!1;var m=d.canvas.create();m.size(320,32);var n=0;l.on("load",function(){function a(a){c.current=a.target.getAttribute("tile")}for(var b=!1,c={current:"block"},o=document.querySelectorAll("#editormode>a"),p=0;p<o.length;p++)o[p].addEventListener("click",a);var q=new d.GameObject,r=new h(e,j),s=new g(e,16,20),t=0;q.on("init",function(){t=0,s=new g(e,16,20),r=new h(e,k[n].data),l.music.play(!0),s.on("death",function(){console.log("back to title screen"),n=0,e.state=w}),s.on("win",function(){n++,n>k.length&&(n=0),e.state=w})}),q.on("clear",function(){l.music.stop()}),q.on("keydown",function(a){a.code===f.RIGHT&&s.right(),a.code===f.LEFT&&s.left(),a.code===f.UP&&s.jump(),b&&(a.code===f.A&&t--,a.code===f.D&&t++)}),q.on("keyup",function(a){(a.code===f.RIGHT||a.code===f.LEFT)&&s.idle(),a.code===f.UP,a.code===f.F2&&(console.log("secret editor mode."),document.getElementById("editormode").style.display="block",b=!0),a.code===f.F4&&r.dump()});var u={X:0,Y:0};q.on("mousemove",function(a){u=a}),q.on("click",function(a){if(b){var d={X:(a.X/10|0)+t,Y:a.Y/10|0};if(console.log(a),0===a.button)r.add({type:c.current,position:d});else{var e=r.collides(d.X,d.Y);e&&r.remove(e)}}}),q.on("draw",function(a){m.context.fillStyle="white",m.context.fillRect(0,0,320,32);for(var d=0;16>d;d++)m.context.drawImage(l.sky,32*d,0);if(r.draw(m),s.draw(m),s.position.X>16&&(t=s.position.X-16),m.context.fillText(k[n].name,0,10),a.canvas.context.drawImage(m.element,t,0,32,32,0,0,320,320),b){var e=r.getBB(c.current);a.canvas.context.strokeRect(10*(u.X/10|0)+10*e.X,10*(u.Y/10|0)+10*e.Y,10*e.width,10*e.height)}});var v=0;q.on("update",function(){var a=Date.now(),b=!1;a-v>100&&(b=!0,v=a),s.update(r,b),r.update(b)});var w=new i(e);w.on("dismiss",function(){e.state=q}),e.state=w,e.run()}),l.load({ground:"images/ground.png",sprites:"images/sprites3.png",coin:"images/coin2.png",crooked:"images/32crooked.png",lava:"images/lava.png",house:"images/house.png",block:"images/block.png",sky:"images/sky.png",enemy:"images/enemy.png",music:"audio/music.mp3",jump:"audio/jump.mp3",pickup:"audio/pickup.mp3",powerup:"audio/powerup.mp3",hurt:"audio/hurt.mp3",wall:"images/wall.png",door:"images/door.png",platform:"images/platform.png",shortplatform:"images/shortplatform.png"})},{"./1-1.json":1,"./1-2.json":2,"./character":4,"./world":5,"./logo":6,jsgtb:7}],5:[function(a,b,c){"use strict";var d=a("jsgtb"),e=a("./thing"),f=a("./enemy"),g=a("./platform"),h=function(a,b,c){return new g(a,b,c,!0)},i=function(a,b){var c,i,j=new a.Resources,k=[],l={},m=[];for(c=0;320>c;c++)for(m[c]=[],i=0;32>i;i++)m[c][i]=0;l.lava={image:j.lava,size:{width:8,height:16},bbox:{X:0,Y:11,width:8,height:5},animations:{idle:{frames:[0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8],fps:10}}},l.enemy={image:j.enemy,bbox:{X:1,Y:0,width:2,height:4},size:{width:4,height:4},animations:{idle:{frames:[0,1],fps:5},walk:{frames:[0,1],fps:5},death:{frames:[0,1,2,3,4,5],fps:10,noloop:!0}}},l.ground={image:j.ground,size:{width:8,height:8},bbox:{X:0,Y:0,width:8,height:8},animations:{idle:{frames:[0],fps:0}}},l.wall={image:j.wall,size:{width:8,height:8},bbox:{X:0,Y:2,width:8,height:6},animations:{idle:{frames:[0],fps:0}}},l.door={image:j.door,size:{width:8,height:8},bbox:{X:0,Y:2,width:8,height:6},animations:{idle:{frames:[0],fps:0}}},l.coin={image:j.coin,size:{width:2,height:2},bbox:{X:0,Y:0,width:2,height:2},animations:{idle:{frames:[0,1,2,3],fps:5}}},l.platform={size:{width:16,height:2},bbox:{X:0,Y:0,width:16,height:2}},l.shortplatform={size:{width:4,height:2},bbox:{X:0,Y:0,width:4,height:2}},l.house={image:j.house,size:{width:16,height:16},bbox:{X:0,Y:7,width:16,height:1},animations:{idle:{frames:[0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7],fps:10}}},l.block={image:j.block,size:{width:2,height:5},bbox:{X:0,Y:3,width:2,height:1},animations:{idle:{frames:[0],fps:0},bump:{frames:[0,1],fps:5,noloop:!0},vanish:{frames:[0,2,3],fps:5,noloop:!0}}};var n=new d.GameObject;if(n({update:function(a){for(var b=0;b<k.length;b++)k[b].update&&k[b].update(n,a)},draw:function(a){for(var b=0;b<k.length;b++)k[b].draw(a)},collides:function(a,b){return m[a]&&m[a][b]?m[a][b].gone?null:m[a][b]:null},remove:function(a){console.log("trying to remove thing");for(var b=0;b<k.length;b++)if(k[b]===a){a.gone=!0,k.splice(b,1);break}},addBB:function(a,b,d,e){for(c=e.X;c<e.X+e.width;c++)for(i=e.Y;i<e.Y+e.height;i++)m[b+c][d+i]=a},add:function(b){switch(b.type){case"enemy":k.push(new f(a,b.position.X,b.position.Y));break;case"platform":k.push(new g(a,b.position.X,b.position.Y));break;case"shortplatform":k.push(new h(a,b.position.X,b.position.Y));break;default:k.push(new e(a,b.position.X,b.position.Y,l[b.type],b.type))}var d=l[b.type].bbox||{X:0,Y:0,width:l[b.type].size.width,height:l[b.type].size.height};for(c=d.X;c<d.X+d.width;c++)for(i=d.Y;i<d.Y+d.height;i++)m[b.position.X+c][b.position.Y+i]=k[k.length-1]},getBB:function(a){return l[a].bbox},dump:function(){for(var a={things:[]},b=0;b<k.length;b++)a.things.push({type:k[b].type,position:k[b].position});console.log(a),console.log(JSON.stringify(a))}}),b&&b.things)for(var o=0;o<b.things.length;o++)n.add(b.things[o]);return n};b.exports=i},{"./thing":8,"./enemy":9,"./platform":10,jsgtb:7}],4:[function(a,b,c){"use strict";var d=a("jsgtb"),e=a("./thing"),f=function(a,b,c){var f=new a.Resources,g=0,h={image:f.sprites,size:{width:4,height:4},bbox:{X:1,Y:0,width:2,height:4},animations:{walk:{frames:[1,2,3,4],fps:10},jump:{frames:[0,5,6],fps:10,noloop:!0},idle:{frames:[0,0,0,5],fps:2},death:{frames:[6,7,8,9,10,11,12,13,14,15,15,15,15,15,15],fps:10,noloop:!0}}},i=new d.GameObject,j="idle",k=0,l=99,m=!0,n=!1,o=function(a){n||(a?console.log("died because of "+a):console.log("died for no reason."),n=!0,f.hurt.play(),i.setAnimation("death",function(){n=!1,i.fire("death")}))};return i(new e(a,b,c,h)),i({right:function(){j="right"},left:function(){j="left"},idle:function(){i.setAnimation("idle"),j="idle"},jump:function(){m&&!n&&(l=0,i.setAnimation("jump"),f.jump.play())},update:function(a,b){var c=function(b){f.pickup.play(),g++,a.remove(b)},d=function(b){i.jump(),b.idle(),f.powerup.play(),b.setAnimation("death",function(){a.remove(b)})},e=function(b){b.setAnimation("vanish",function(){a.remove(b)})},h=Date.now();if(b){k=h;var p=a.collides(i.position.X+1,i.position.Y+4),q=a.collides(i.position.X+2,i.position.Y+4);p||q?(m=!0,(p&&"platform"===p.type||q&&"platform"===q.type)&&(i.position.X+="right"===(p||q).direction?1:-1),(p&&"lava"===p.type||q&&"lava"===q.type)&&o("lava"),(p&&"enemy"===p.type||q&&"enemy"===q.type)&&(p===q?d(p):p&&"enemy"===p.type?d(p):q&&d(q)),p&&"coin"===p.type&&c(p),q&&q!==p&&"coin"===q.type&&c(q)):m=!1;for(var r=function(a,b){return a?b?"coin"!==a.type&&"door"!==a.type&&"enemy"!==a.type?!0:!1:("door"===a.type&&i.fire("win"),"enemy"===a.type&&o("enemy"),"coin"!==a.type?!0:void c(a)):!1},s=0;4>s;s++){var t=a.collides(i.position.X+1,i.position.Y+s);r(t)&&"left"===j&&(j="idle"),t=a.collides(i.position.X+2,i.position.Y+s),r(t)&&"right"===j&&(j="idle"),"left"===j&&r(a.collides(i.position.X,i.position.Y+s),!0)&&(j="idle"),"right"===j&&r(a.collides(i.position.X+3,i.position.Y+s),!0)&&(j="idle")}if(8>l){i.position.Y--,l++;var u=a.collides(i.position.X+1,i.position.Y-1),v=a.collides(i.position.X+2,i.position.Y-1),w=function(a){a.boop||(a.boop=0),l=99,0===a.boop?a.setAnimation("bump"):e(a),a.boop++};(u&&"block"===u.type||v&&"block"===v.type)&&(u===v?w(u):(u&&"block"===u.type&&w(u),v&&"block"===v.type&&w(v)))}else m||i.position.Y++;if(n)console.log("cant move: dying!");else switch(j){case"idle":break;case"right":i.setAnimation("walk"),i.position.X++;break;case"left":i.setAnimation("walk"),i.position.X--}}}}),i};b.exports=f},{"./thing":8,jsgtb:7}],6:[function(a,b,c){"use strict";var d=a("jsgtb"),e=function(a){var b,c,e=new a.Resources,f=new d.GameObject,g=!1;f.on("init",function(){b=Date.now(),c=0,g=!1}),f.on("draw",function(a){var d=Date.now();!g&&1>c&&d-b>40&&(c+=.1,b=d),g&&c>0&&d-b>40&&(c-=.1,b=d,0>=c&&f.fire("dismiss")),a.canvas.clear("black"),a.canvas.context.save(),a.canvas.context.globalAlpha=c,a.canvas.context.drawImage(e.crooked,0,0,32,32,0,0,320,320),a.canvas.context.restore()});var h=function(){g=!0};return f.on("click",h),f.on("keyup",h),f};b.exports=e},{jsgtb:7}],8:[function(a,b,c){"use strict";var d=a("jsgtb"),e=function(a,b,c,e,f){var g=new d.GameObject,h="idle",i=null,j=Date.now(),k=0,l={X:b,Y:c};e.size||(e.size={width:4,height:4});var m=function(a){e.animations[h].fps&&e.animations[h].fps>0&&Date.now()-j>1e3/e.animations[h].fps&&(j=Date.now(),k++,k>=e.animations[h].frames.length&&(k=0,e.animations[h].noloop&&(i?i():h="idle"))),a.context.drawImage(e.image,e.animations[h].frames[k]*e.size.width,0,e.size.width,e.size.height,l.X,l.Y,e.size.width,e.size.height)};return g({draw:m,getAnimation:function(){return h},setAnimation:function(a,b){h!==a&&"death"!==h&&(k=0,h=a,i=b)},position:l,type:f}),g};b.exports=e},{jsgtb:7}],9:[function(a,b,c){"use strict";var d=a("jsgtb"),e=a("./thing"),f=function(a,b,c){var f=new a.Resources,g={image:f.enemy,bbox:{X:1,Y:0,width:2,height:4},size:{width:4,height:4},animations:{idle:{frames:[0,1],fps:5},walk:{frames:[0,1],fps:5},death:{frames:[0,1,2,3,4,5],fps:10,noloop:!0}}},h=new d.GameObject,i="right",j=0,k=!0,l=!1,m=function(){l=!0,h.setAnimation("death",function(){l=!1,h.fire("death")})},n=function(){i="right"===i?"left":"right"};return h(new e(a,b,c,g)),h({type:"enemy",right:function(){i="right"},left:function(){i="left"},idle:function(){h.setAnimation("idle"),i="idle"},update:function(a,b){var c=Date.now();if(b){j=c;var d=a.collides(h.position.X+1,h.position.Y+4),e=a.collides(h.position.X+2,h.position.Y+4);d&&e||n(),d||e?(k=!0,(d&&"lava"===d.type||e&&"lava"===e.type)&&m()):k=!1;for(var f=0;4>f;f++){var o=a.collides(h.position.X,h.position.Y+f),p=a.collides(h.position.X+3,h.position.Y+f);if(o&&o!==h&&"left"===i){n();break}if(p&&p!==h&&"right"===i){n();break}}if(!l)switch(i){case"idle":break;case"right":a.addBB(0,h.position.X,h.position.Y,g.bbox),h.setAnimation("walk"),h.position.X++,a.addBB(h,h.position.X,h.position.Y,g.bbox);break;case"left":a.addBB(0,h.position.X,h.position.Y,g.bbox),h.setAnimation("walk"),h.position.X--,a.addBB(h,h.position.X,h.position.Y,g.bbox)}}}}),h};b.exports=f},{"./thing":8,jsgtb:7}],10:[function(a,b,c){"use strict";var d=a("jsgtb"),e=a("./thing"),f=function(a,b,c,f){var g=new a.Resources,h={image:g.platform,bbox:{X:0,Y:0,width:16,height:2},size:{width:16,height:2},animations:{idle:{frames:[0],fps:0},walk:{frames:[0],fps:0}}};f&&(h.bbox.width=4,h.size.width=4,h.image=g.shortplatform);var i=new d.GameObject,j="right";i.direction=j;var k=0,l=!1,m=function(){j="right"===j?"left":"right",i.direction=j};return i(new e(a,b,c,h)),i({type:"platform",right:function(){j="right"},left:function(){j="left"},idle:function(){i.setAnimation("idle"),j="idle"},update:function(a,b){var c=Date.now();if(b){k=c;var d=a.collides(i.position.X-1,i.position.Y+1),e=a.collides(i.position.X+16,i.position.Y+1);d&&"left"===j&&m(),e&&"right"===j&&m();for(var f=0;16>f;f++){var g=a.collides(i.position.X+f,i.position.Y-1);if(g){g.position.X+="right"===j?1:-1;break}}if(!l)switch(j){case"idle":break;case"right":a.addBB(0,i.position.X,i.position.Y,h.bbox),i.setAnimation("walk"),i.position.X++,a.addBB(i,i.position.X,i.position.Y,h.bbox);break;case"left":a.addBB(0,i.position.X,i.position.Y,h.bbox),i.setAnimation("walk"),i.position.X--,a.addBB(i,i.position.X,i.position.Y,h.bbox)}}}}),i};b.exports=f},{"./thing":8,jsgtb:7}],7:[function(a,b,c){b.exports={canvas:a("./canvas"),CollisionBox:a("./collisionbox"),Container:a("./container"),easing:a("./easing"),events:a("./events"),game:a("./game"),GameObject:a("./gameobject"),gamePad:a("./gamepad"),GameState:a("./gamestate"),keys:a("./keys"),Menu:a("./menu"),Particles:a("./particles"),racket:a("./racket"),raf:a("./raf"),Resources:a("./resources"),Simplex:a("./simplex"),sponge:a("./sponge"),StateMachine:a("./statemachine")}},{"./canvas":11,"./collisionbox":12,"./container":13,"./easing":14,"./events":15,"./game":16,"./gameobject":17,"./gamestate":18,"./gamepad":19,"./keys":20,"./menu":21,"./particles":22,"./racket":23,"./raf":24,"./resources":25,"./simplex":26,"./sponge":27,"./statemachine":28}],11:[function(a,b,c){function d(a){a=a||document.createElement("canvas");var b=a.getContext("2d"),c={element:a,context:b,imageData:function(c){return c&&b.putImageData(c,0,0),b.getImageData(0,0,a.width,a.height)},create:function(a){var b=d();return b.size(a),b},clone:function(a){var b=d();return b.size(c.size()),a||b.context.drawImage(c.element,0,0),b},clear:function(c){c?(b.save(),b.fillStyle=c,b.fillRect(0,0,a.width,a.height),b.restore()):a.width=a.width},size:function(b,c){return b&&("object"==typeof b?(a.width=b.W||b.width,a.height=b.H||b.height):(a.width=b,a.height=c)),{width:a.width,height:a.height}}};return Object.defineProperty(c,"width",{get:function(){return a.width},set:function(b){a.width=b}}),Object.defineProperty(c,"height",{get:function(){return a.height},set:function(b){a.height=b}}),c.position=function(){for(var a=0,b=0,d=c.element;d;)a+=d.offsetLeft,b+=d.offsetTop,d=d.parentElement;return{X:a,Y:b}}(),c}var e=document.getElementsByTagName("canvas")[0];b.exports=d(e)},{}],13:[function(a,b,c){var d=function(){var a=[],b={noncollider:!0,count:function(){return a.length},add:function(b){a.push(b)},remove:function(b){for(var c=a.length-1;c>=0;--c)if(a[c]===b){a.splice(c,1);break}},each:function(b){for(var c=0;c<a.length;c++)b(a[c])},draw:function(){b.each(function(a){a.draw()})}};return b};b.exports=d},{}],12:[function(a,b,c){var d=function(a){"use strict";var b={dirty:!1,die:function(){return!1},position:{X:a.x+a.width/2,Y:a.y+a.height/2},draw:function(){return!1},boundingbox:[-(a.width/2),-(a.height/2),a.width,a.height],type:"collisionbox"};return b};b.exports=d},{}],14:[function(a,b,c){b.exports=function(a,b,c,d){return(a/=d)<1/2.75?c*(7.5625*a*a)+b:2/2.75>a?c*(7.5625*(a-=1.5/2.75)*a+.75)+b:2.5/2.75>a?c*(7.5625*(a-=2.25/2.75)*a+.9375)+b:c*(7.5625*(a-=2.625/2.75)*a+.984375)+b}},{}],15:[function(a,b,c){b.exports={attach:function(a){var b={},c={on:function(c,d){return b[c]||(b[c]=[]),b[c].push(d),a},fire:function(c,d){if(b[c])for(var e=0;e<b[c].length;e++)if(b[c][e].call(a,d))return},remove:function(a,c){if(b[a])for(var d=0;d<b[a].length;d++)if(b[a][d]===c){b[a].splice(d,1);break}}};for(var d in c)a[d]=c[d]}},b.exports.attach(b.exports)},{}],17:[function(a,b,c){"use strict";var d=function(a,b){var c=this instanceof d,e=function(a){var c={},d=[],e=function(a){a=a||{};for(var b=Object.getOwnPropertyNames(a),c=0;c<b.length;c++){var d=b[c],f=Object.getOwnPropertyDescriptor(a,d);Object.defineProperty(e,d,f)}return e};if(e({on:function(a,b){return c[a]||(c[a]=[]),c[a].push(b),e},fire:function(a,b,f){var g;if(f=f||{stop:!1},c[a])for(g=0;g<c[a].length;g++)if(c[a][g].call(e,b)){f.stop=!0;break}if(d.length>0&&!f.stop)for(g=0;g<d.length&&(d[g].fire(a,b,f),!f.stop);g++);return e},clearEventListeners:function(){c={}},removeEventListener:function(a,b){if(c[a]){for(var d=0;d<c[a].length;d++)if(c[a][d]===b){c[a].splice(d,1);break}return e}},add:function(a){return d.push(a),e},remove:function(a){for(var b=0;b<d.length;b++)if(d[b]===a)return d.splice(b,1),console.log("remove sub-state "+b),e;return e}}),b)for(var f in b)e.on(f,b[f]);return e(a)};return c?e(a):function(b){var c=e(a);return c(b)}};b.exports=d},{}],20:[function(a,b,c){b.exports={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPSLOCK:20,ESC:27,SPACE:32,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,W:87,A:65,S:83,D:68,NUMLOCK:144,SCROLLLOCK:145}},{}],23:[function(a,b,c){!function(){"use strict";function a(a,b){var c=new Audio,d=3,e=[],f=a.substr(a.lastIndexOf(".")+1).toLowerCase();b=b||function(a){console.log("no callback set for loading audio.")};var g={canPlay:{mp3:c.canPlayType("audio/mpeg"),ogg:c.canPlayType("audio/ogg"),wav:c.canPlayType("audio/wav")},volume:function(a){for(var b=0;b<e.length;b++)e[b].volume=a},play:function(b){for(var c=0;d>c;c++)if(c>=e.length&&(e[c]=new Audio(a),e[c].load&&e[c].load()),0===e[c].currentTime||e[c].ended)return e[c].loop=b,void e[c].play();e[0].pause(),e[0].loop=b,e[0].currentTime=0,e[0].play()},stop:function(){for(var a=0;a<e.length;a++)e[a]&&!e[a].paused&&(e[a].pause(),e[a].currentTime=0)}};return g.canPlay[f]?(e.push(new Audio(a)),e[0].load&&e[0].load(),b(!0)):(b(!1),console.log("This filetype cannot be played on this browser: "+f)),g}b.exports={create:a}}()},{}],24:[function(a,b,c){var d=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||function(a){setTimeout(a,17)};b.exports=d},{}],26:[function(a,b,c){var d=function(){function a(a){d=[{X:1,Y:1},{X:-1,Y:1},{X:1,Y:-1},{X:-1,Y:-1},{X:1,Y:0},{X:-1,Y:0},{X:1,Y:0},{X:-1,Y:0},{X:0,Y:1},{X:0,Y:-1},{X:0,Y:1},{X:0,Y:-1}],"undefined"==typeof a&&(a={}),e=a.p||[],f=[],g=[],h=a.F2||.5*(Math.sqrt(3)-1),i=a.G2||(3-Math.sqrt(3))/6;for(var b=0;512>b;b++)a.p||e.push(Math.floor(255*Math.random())),f.push(e[255&b]),g.push(f[b]%12)}function b(a,b,c){return a.X*b+a.Y*c}function c(a,c,e,f){return 0>a?0:Math.pow(a,4)*b(d[c],e,f)}var d,e,f,g,h,i;return a(),{setseed:function(b){i=b.G2,h=b.F2,e=b.p,a(b)},noise:function(a,b){var d,e,j,k,l,m,n,o,p,q,r,s,t=(a+b)*h,u=a+t|0,v=b+t|0,w=(u+v)*i,x=a-(u-w),y=b-(v-w);return x>y?(d=1,e=0):(d=0,e=1),j=x-d+i,l=y-e+i,k=x-1+2*i,m=y-1+2*i,n=255&u,o=255&v,p=g[n+f[o]],q=g[n+d+f[o+e]],r=g[n+1+f[o+1]],s=c(.5-x*x-y*y,p,x,y)+c(.5-j*j-l*l,q,j,l)+c(.5-k*k-m*m,r,k,m),70*s}}};b.exports=d},{}],27:[function(a,b,c){b.exports={attach:function(a){a.absorb=function(b){for(var c in b)if(b.hasOwnProperty(c)){var d=Object.getOwnPropertyDescriptor(b,c);Object.defineProperty(a,c,d)}}}}},{}],16:[function(a,b,c){"strict mode";"use strict";var d=a("./raf"),e=a("./canvas"),f=0,g=a("./resources"),h=a("./gamepad"),i={mouse:[],run:function(){var a=Date.now(),b=a-f;i.state&&(i.state.fire("update",{now:a,frameTime:b}),i.state.fire("draw",{canvas:e,now:a,frameTime:b})),f=a,d.call(window,i.run)},Resources:g,touches:{}},j=null;Object.defineProperty(i,"state",{get:function(){return j},set:function(a){j&&j.fire("clear"),a.fire("init"),j=a}}),document.addEventListener("keyup",function(a){i.state&&i.state.fire("keyup",{code:a.keyCode,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}),document.addEventListener("keydown",function(a){i.state&&i.state.fire("keydown",{code:a.keyCode,ctrl:a.ctrlKey,alt:a.altKey,shift:a.shiftKey})}),window.addEventListener("mousemove",function(a){if(i.state){var b=a.clientX-e.position.X,c=a.clientY-e.position.Y;i.state.fire("mousemove",{X:b,Y:c})}}),document.addEventListener("mousedown",function(a){if(i.mouse[a.button]=Date.now(),a.preventDefault(),i.state){var b=a.clientX-e.position.X,c=a.clientY-e.position.Y;i.state.fire("mousedown",{X:b,Y:c,button:a.button})}}),document.addEventListener("mouseup",function(a){var b,c,d=Date.now();console.log(d-i.mouse[a.button]),d-i.mouse[a.button]<150&&i.state&&(b=a.clientX-e.position.X,c=a.clientY-e.position.Y,i.state.fire("click",{X:b,Y:c,button:a.button})),i.mouse[a.button]=null,i.state&&(b=a.clientX-e.position.X,c=a.clientY-e.position.Y,i.state.fire("mouseup",{X:b,Y:c,button:a.button}))}),window.addEventListener("touchstart",function(a){if(i.state){var b=a.changedTouches;if(b.length>0){0|b[0].pageX,0|b[0].pageY;i.state.fire("touchstart",b),i.touches[b[0].identifier]=Date.now()}}}),window.addEventListener("touchmove",function(a){if(i.state){var b=a.changedTouches;if(b.length>0){0|b[0].pageX,0|b[0].pageY;i.state.fire("touchmove",b)}}}),window.addEventListener("touchend",function(a){var b,c,d=a.changedTouches;i.state&&d.length>0&&(b=0|d[0].pageX,c=0|d[0].pageY,i.state.fire("touchend",d))}),h.on("button",function(a){i.state&&i.state.fire("button",a)}),h.on("axis",function(a){i.state&&i.state.fire("axis",a)}),h.on("angle",function(a){i.state&&i.state.fire("angle",a)}),b.exports=i},{"./raf":24,"./canvas":11,"./resources":25,"./gamepad":19}],18:[function(a,b,c){var d=a("./gameobject"),e=function(){var a=new d;return a};b.exports=e},{"./gameobject":17}],19:[function(a,b,c){"use strict";var d=a("./raf"),e=a("./events"),f=[],g=[],h=null,i=null,j=0,k={deadzone:.5,poll:function(){var a,b=navigator.webkitGetGamepads&&navigator.webkitGetGamepads()[0];if(b){for(i||(i=b.id),a=0;a<b.buttons.length;a++)0!==b.buttons[a]?f[a]||(k.fire("button",{which:a,action:"down"}),f[a]=!0):f[a]&&(k.fire("button",{which:a,action:"up"}),f[a]=!1);for(a=0;a<b.axes.length;a++){if(Math.abs(b.axes[0])>k.deadzone||Math.abs(b.axes[1])>k.deadzone){var c=Math.atan2(b.axes[1],b.axes[0]),e=Math.abs(b.axes[0]),l=Math.abs(b.axes[1]),m=Math.sqrt(e*e+l*l);k.fire("angle",{value:c,strength:m}),j=c}else 0!==j&&(k.fire("angle",{value:0,strength:0}),j=0);Math.abs(b.axes[a])>k.deadzone?k.fire("axis",{which:a,value:b.axes[a],action:"engage"}):Math.abs(g[a])>k.deadzone&&k.fire("axis",{which:a,value:b.axes[a],action:"release"}),g[a]=b.axes[a]}h=b}d.call(window,k.poll)},A:0,B:1,X:2,Y:3};e.attach(k),k.poll(),b.exports=k},{"./raf":24,"./events":15}],21:[function(a,b,c){function d(a,b){var c={X:10,Y:10+120*a,W:280,H:100};return b.X>c.X&&b.X<c.X+c.W&&b.Y>c.Y&&b.Y<c.Y+c.H?!0:!1}var e=a("./easing"),f=a("./resources"),g="rgba(0, 0, 0, 0.7)",h=324,i=80,j=500,k=function(a,b,c){var k,l,m=0,n={X:0,Y:0},o=a.getContext("2d"),p=0,q={font:"48px Rationale",click:function(a){if(a.X<h)for(var c=0;c<b.length;c++)d(c,a)&&b[c].action()},run:function(){if(0!==m){var d=Date.now()-m,r=-1,s=a.width;c&&0>l&&(r=1,s=a.width-c.width),j>d?(n.X=0|e(d,k,l,j),c&&(p=0|e(d,s,r*c.width,j))):(n.X=k+l,c&&(p=a.width-c.width),0>l&&q.done&&q.done()),o.save(),o.drawImage(q.background,0,0),c&&o.drawImage(f[c],p,a.height/2-c.height/2),o.fillStyle=g,o.fillRect(n.X-i,n.Y,h+i,a.height),o.translate(n.X,n.Y),o.textBaseline="middle",o.textAlign="center",o.font=q.font;for(var t=0;t<b.length;t++){var u=b[t].icon?37:0;b[t].label&&(o.fillStyle=g,o.fillStyle="white",o.fillText(b[t].label,150+u,60+120*t)),b[t].icon&&o.drawImage(b[t].icon,0,0,b[t].icon.width,b[t].icon.height,37,37+120*t,48,48)}o.restore()}},init:function(){q.background=document.createElement("canvas"),q.background.width=a.width,q.background.height=a.height,q.background.getContext("2d").drawImage(a,0,0),m=Date.now(),k=-h,l=h,n.X=k},lifetime:function(){return Date.now()-m},clear:function(a){q.time=Date.now()-m,
m=Date.now(),k=0,l=-h,n.X=k,q.done=a}};return q};b.exports=k},{"./easing":14,"./resources":25}],22:[function(a,b,c){function d(a){var b={then:Date.now(),birth:Date.now(),angle:0,unborn:!0,ttl:Math.random()*(a.ttl.max-a.ttl.min),reset:function(c){if(b.dead)return void(b.unborn=!0);var d=Date.now(),e=Math.random()*(2*Math.PI);b.position=h.copy(a.position),b.startPosition=h.copy(a.position),b.birth=d,b.alpha=1,b.unborn=!1,b.then=d,b.image=f[a.image],b.direction=h(Math.cos(e),Math.sin(e)),b.scale=Math.random()*(a.scale.max-a.scale.min)+a.scale.min,b.speed=Math.random()*(a.speed.max-a.speed.min)+a.speed.min,b.ttl=Math.random()*(a.ttl.max-a.ttl.min)+a.ttl.min},die:function(){b.dead=!0},update:function(c){var d=Date.now(),e=d-b.birth;if(e>b.ttl)b.reset(a.position);else if(!b.unborn){var f=e*b.speed;b.position.X=b.startPosition.X+f*b.direction.X,b.position.Y=b.startPosition.Y+f*b.direction.Y,b.angle+=.1,b.alpha=1-e/b.ttl}b.then=d},draw:function(){b.unborn||(e.context.save(),e.context.translate(b.position.X,b.position.Y),e.context.scale(b.scale,b.scale),e.context.rotate(b.angle),e.context.globalAlpha=b.alpha,e.context.drawImage(b.image,-b.image.width/2,-b.image.height/2),e.context.restore())}};return b}var e=a("./canvas"),f=a("./resources"),g=a("./events"),h=function(a,b){return{X:a,Y:b}};h.copy=function(a){return{X:a.X,Y:a.Y}};var i=function(a){var b,c=a.systemTtl||0,e=Date.now(),f=[],h={position:a.position,draw:function(){h.run()},keyup:function(a){32===a&&h.kill()},kill:function(){c=1},run:function(){if(!h.dead){if(a.count>f.length)for(b=0;b<a.count-f.length;b++)f.push(d(a));a.count<f.length&&(f.length=0|a.count);var g=Date.now(),i=0;for(b=0;b<f.length;b++)f[b].update(),f[b].draw(),0!==c&&g-e>c&&f[b].die(),f[b].dead&&f[b].unborn&&i++,i===f.length&&(h.fire("death"),h.dead=!0)}},init:function(){console.log("init particles")}};return g.attach(h),h};b.exports=i},{"./canvas":11,"./resources":25,"./events":15}],25:[function(a,b,c){var d=a("./gameobject"),e=a("./racket"),f=new d,g=null;f({loaded:0,load:function(a){var b=/(wav$|mp3$|ogg$)/,c=/(3d$|js$|json$)/,d=Object.getOwnPropertyNames(a).length,h=0,i={audio:function(b){f[b]=e.create(a[b],function(a){a||console.log("failed to load audio: "+b),j(b)})},mesh:function(b){if("undefined"==typeof THREE)throw"THREE does not exist; cannot load resource "+b;g=g||new THREE.JSONLoader,g.load(a[b],function(a,c){for(var d=0;d<c.length;d++)c[d].shading=THREE.FlatShading;var e=new THREE.MeshFaceMaterial(c);f[b]={geometry:a,material:e},j(b)})},image:function(b){var c=new Image;c.onload=function(){j(b)},c.onerror=function(){console.log("failed to load: "+a[b]),j(b)},c.src=a[b],c.setAttribute("name",b),f[b]=c}},j=function(b){f.fire("progress",b),f.loaded++,h++,h===d&&f.fire("load",a),console.log("loaded: "+b)};for(var k in a){if(f.hasOwnProperty(k))throw"naming conflict; cannot load resource "+k;var l="image";l=b.test(a[k])?"audio":l,l=c.test(a[k])?"mesh":l,i[l](k)}return f}});var h=function(a){return a&&f.load(a),f};b.exports=h},{"./gameobject":17,"./racket":23}],28:[function(a,b,c){var d=a("./gameobject"),e=function(){var a=null,b=0,c=new d;return c({run:function(){var a=Date.now(),d=a-b;c.state&&(c.state.fire("update",{now:a,frameTime:d}),c.state.fire("draw",{canvas:Canvas,now:a,frameTime:d})),b=a,raf.call(window,c.run)},state:null}),Object.defineProperty(c,"state",{get:function(){return a},set:function(b){a&&a.fire("clear"),b.fire("init"),a=b}}),c};b.exports=e},{"./gameobject":17}]},{},[3]);